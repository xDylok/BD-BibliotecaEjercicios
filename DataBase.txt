DROP DATABASE IF EXISTS SanPabloDB;
CREATE DATABASE IF NOT EXISTS SanPabloDB;
USE SanPabloDB;

CREATE TABLE SUCURSAL (
    ID_Sucursal INT PRIMARY KEY AUTO_INCREMENT,
    Nombre VARCHAR(100) NOT NULL,
    Ciudad VARCHAR(100),
    Direccion VARCHAR(255)
);

CREATE TABLE PACIENTE (
    ID_Paciente INT PRIMARY KEY AUTO_INCREMENT,
    Nombres VARCHAR(100) NOT NULL,
    Apellidos VARCHAR(100),
    Correo VARCHAR(100) UNIQUE,
    F_Nacimiento DATE,
    Telefono VARCHAR(20),
    Genero ENUM('Masculino', 'Femenino', 'Otro') NOT NULL
);

CREATE TABLE DOCTOR (
    ID_Doctor INT PRIMARY KEY AUTO_INCREMENT,
    Nombres VARCHAR(100) NOT NULL,
    Apellidos VARCHAR(100),
    Num_licencia VARCHAR(50) UNIQUE,
    Especialidad VARCHAR(100),
    Correo VARCHAR(100) UNIQUE,
    ID_Sucursal_fk INT,
    
    FOREIGN KEY (ID_Sucursal_fk) REFERENCES SUCURSAL(ID_Sucursal)
);

CREATE TABLE CITA (
    ID_Cita INT PRIMARY KEY AUTO_INCREMENT,
    Fecha DATE,
    Hora TIME,
    Motivo VARCHAR(255),
    Estado ENUM('Programada', 'Completada', 'Cancelada', 'No_Asistio') NOT NULL,
    ID_Paciente_fk INT,
    ID_Doctor_fk INT,
    
    FOREIGN KEY (ID_Paciente_fk) REFERENCES PACIENTE(ID_Paciente),
    FOREIGN KEY (ID_Doctor_fk) REFERENCES DOCTOR(ID_Doctor)
);

CREATE TABLE TRATAMIENTO (
    ID_Tratamiento INT PRIMARY KEY AUTO_INCREMENT,
    Descripcion TEXT,
    Duracion_dias INT,
    Costo DECIMAL(10, 2), -- Ej. 99999999.99
    ID_Cita_fk INT,
    
    FOREIGN KEY (ID_Cita_fk) REFERENCES CITA(ID_Cita)
);




